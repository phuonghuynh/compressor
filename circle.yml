---
general:
  branches:
    ignore:
      - /release.*/
machine:
  java:
    version: oraclejdk8
  environment:
    PROCESSING_URL: http://b.papi.staging.finix.io/

deployment:
  snapshot:
    branch: master
    owner: phuonghuynh
    commands:
      - mvn deploy -DskipTests=true -s settings.xml
  release:
    branch: staged
    owner: phuonghuynh
    commands:
     - git config user.name "Sexy Deploybot"
     - git config user.email "phuonghqh@gmail.com"
     - git remote prune origin
     - git checkout master && git pull -a && git checkout staged
     - mvn --batch-mode -Dmaven.javadoc.skip=true -DautoVersionSubmodules=true -DallowSnapshots=true -DskipTests=true jgitflow:release-start jgitflow:release-finish
